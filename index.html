<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>√Ålbum de Figurinhas</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f6fb;
  text-align: center;
  margin: 0;
}

/* LOGIN */
#login {
  margin-top: 100px;
}

input {
  padding: 10px;
  font-size: 16px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

/* BOT√ÉO */
button {
  padding: 12px 24px;
  border-radius: 10px;
  border: none;
  background: #ff6f61;
  color: white;
  font-size: 16px;
  cursor: pointer;
  margin: 15px;
}

/* FIGURINHAS */
.fig {
  position: relative;
  display: inline-block;
  margin: 8px;
  cursor: pointer;
}

.fig img {
  width: 110px;
  border-radius: 10px;
}

.fig span {
  position: absolute;
  top: 5px;
  left: 6px;
  background: rgba(0,0,0,0.75);
  color: white;
  font-size: 14px;
  padding: 3px 7px;
  border-radius: 12px;
}

/* √ÅLBUM */
.pagina {
  position: relative;
  width: 600px;
  margin: 40px auto;
}

.pagina img {
  width: 100%;
}

.slot {
  position: absolute;
  width: 140px;
  height: 140px;
  cursor: pointer;
}

/* RESPONSIVO */
@media (max-width: 768px) {
  .fig img {
    width: 150px;
  }
  .pagina {
    width: 95%;
  }
  .slot {
    width: 120px;
    height: 120px;
  }
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <h1>Meu √Ålbum de Figurinhas</h1>
  <p>Digite seu nome:</p>
  <input id="nome">
  <br>
  <button onclick="entrar()">Entrar</button>
</div>

<!-- APP -->
<div id="app" style="display:none">

<h1 id="titulo"></h1>

<button onclick="abrirPacote()">üéÅ Abrir Pacotinho</button>

<h2>Minhas Figurinhas</h2>
<div id="colecao"></div>

<hr>

<div id="album"></div>

</div>

<script>
let usuario = "";
let figurinhaSelecionada = null;
let colecao = new Set();
let coladas = {};

function entrar() {
  usuario = document.getElementById("nome").value.trim();
  if (!usuario) return alert("Digite um nome");

  document.getElementById("login").style.display = "none";
  document.getElementById("app").style.display = "block";
  document.getElementById("titulo").innerText = "√Ålbum de " + usuario;

  carregar();
  montarAlbum();
}

function salvar() {
  localStorage.setItem("colecao_" + usuario, JSON.stringify([...colecao]));
  localStorage.setItem("coladas_" + usuario, JSON.stringify(coladas));
}

function carregar() {
  const c = JSON.parse(localStorage.getItem("colecao_" + usuario) || "[]");
  const k = JSON.parse(localStorage.getItem("coladas_" + usuario) || "{}");

  colecao = new Set(c);
  coladas = k;

  colecao.forEach(n => criarFigurinha(n));
}

function abrirPacote() {
  for (let i = 0; i < 5; i++) {
    const n = Math.floor(Math.random() * 48) + 1;
    if (!colecao.has(n)) {
      colecao.add(n);
      criarFigurinha(n);
    }
  }
  salvar();
}

function criarFigurinha(n) {
  const fig = document.createElement("div");
  fig.className = "fig";
  fig.innerHTML = `<span>${n}</span><img src="${n}.png">`;
  fig.onclick = () => figurinhaSelecionada = n;
  document.getElementById("colecao").appendChild(fig);
}

function criarPagina(imagem, inicio) {
  let html = `<div class="pagina"><img src="${imagem}">`;
  const pos = [[60,80],[60,300],[300,80],[300,300]];

  for (let i = 0; i < 4; i++) {
    const n = inicio + i;
    const img = coladas[n] ? `<img src="${n}.png" style="width:100%">` : "";
    html += `
      <div class="slot"
      style="top:${pos[i][0]}px;left:${pos[i][1]}px"
      onclick="colar(event,${n})">${img}</div>`;
  }
  return html + "</div>";
}

function colar(e, n) {
  if (figurinhaSelecionada === n && !coladas[n]) {
    e.target.innerHTML = `<img src="${n}.png" style="width:100%">`;
    coladas[n] = true;
    figurinhaSelecionada = null;
    salvar();
  }
}

function montarAlbum() {
  const a = document.getElementById("album");
  a.innerHTML = "";
  a.innerHTML += criarPagina("2 RAPUNZEL.png",1);
  a.innerHTML += criarPagina("3 RAPUNZEL.png",5);
  a.innerHTML += criarPagina("4 MACAC√ÉO.png",9);
  a.innerHTML += criarPagina("5 MACAC√ÉO.png",13);
  a.innerHTML += criarPagina("6 AMARELO.png",17);
  a.innerHTML += criarPagina("7 AMARELO.png",21);
  a.innerHTML += criarPagina("8 VERMELHO.png",25);
  a.innerHTML += criarPagina("9 VERMELHO.png",29);
  a.innerHTML += criarPagina("10 VINHO.png",33);
  a.innerHTML += criarPagina("11 VINHO.png",37);
  a.innerHTML += criarPagina("12 BRANCO.png",41);
  a.innerHTML += criarPagina("13 BRANCO.png",45);
}
</script>

</body>
</html>
